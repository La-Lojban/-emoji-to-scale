{"version":3,"sources":["getData.js","data/random.csv","data/travel.csv","data/nature.csv","data/objects.csv","App.js","reportWebVitals.js","index.js"],"names":["dataSources","fetchMultiple","a","dataSourcesPromises","map","source","fetch","then","response","text","dataRaw","trim","split","splice","Promise","all","values","flat","isNumber","val","String","Number","meta","key","dataCombined","dataObj","reduce","acc","row","emoji","label","src","console","warn","includes","replace","terms","deepValue","Object","entries","sort","b","filter","emojiSpace","emojiUnicode","comp","length","charCodeAt","toString","lojbanLength","number","parseSize","size","Math","round","App","useState","data","dataSet","scroll","scrollSet","useEffect","getData","res","document","body","style","height","window","innerHeight","requestAnimationFrame","loop","newScroll","pageYOffset","className","idx","windowWidth","innerWidth","relativeDistance","emojisToScale","floor","ceil","floorCeilProgress","floatScale","calculatedScale","min","opacity","diff","max","transform","alt","dangerouslySetInnerHTML","__html","marginTop","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.4e443685.chunk.js","sourcesContent":["import dataRandom from './data/random.csv';\nimport dataTravel from './data/travel.csv';\nimport dataNature from './data/nature.csv';\nimport dataObjects from './data/objects.csv';\n\nconst dataSources = [dataRandom, dataTravel, dataNature, dataObjects];\n\nasync function fetchMultiple() {\n  const dataSourcesPromises = dataSources.map((source) =>\n    fetch(source)\n      .then((response) => response.text())\n      .then((dataRaw) => {\n        return dataRaw.trim().split(`\\n`).splice(1);\n      })\n  );\n\n  return Promise.all(dataSourcesPromises).then((values) => {\n    return values.flat();\n  });\n}\nfunction isNumber(val) {\n  return String(Number(val)) === val;\n}\n\nexport async function getData() {\n  let meta = {};\n\n  const dataCombined = await fetchMultiple();\n\n  let dataObj = dataCombined.reduce((acc, row) => {\n    const [emoji, source, label, src] = row.split(`,`);\n    if (source === '?') {\n      return acc;\n    }\n\n    if (meta[emoji]) {\n      console.warn('REPEATED', emoji);\n    }\n\n    acc[emoji] = source;\n    meta[emoji] = { source, label, src };\n    return acc;\n  }, {});\n\n  for (const key in dataObj) {\n    const val = dataObj[key];\n    if (dataObj[key].includes('km')) {\n      dataObj[key] = Number(val.replace('km', '')) * 100 * 1000;\n    } else if (dataObj[key].includes('m')) {\n      dataObj[key] = Number(val.replace('m', '')) * 100;\n    } else if (isNumber(dataObj[key])) {\n      dataObj[key] = Number(val);\n    } else if (dataObj[val]) {\n      dataObj[key] = dataObj[val];\n    } else if (val.includes(`*`)) {\n      const terms = val.split(`*`).map((deepValue) => {\n        if (isNumber(deepValue)) {\n          return Number(deepValue);\n        } else if (dataObj[deepValue]) {\n          return dataObj[deepValue];\n        }\n        return deepValue;\n      });\n      dataObj[key] = terms[0] * terms[1];\n    }\n  }\n\n  return Object.entries(dataObj)\n    .sort((a, b) => {\n      return a[1] - b[1];\n    })\n    .map((emoji) => {\n      return [emoji[0], emoji[1], meta[emoji[0]].label];\n    })\n    .filter((emoji) => {\n      return emoji[1] !== '?';\n    });\n}","export default __webpack_public_path__ + \"static/media/random.514a6601.csv\";","export default __webpack_public_path__ + \"static/media/travel.4cbfdb0d.csv\";","export default __webpack_public_path__ + \"static/media/nature.e01b0425.csv\";","export default __webpack_public_path__ + \"static/media/objects.e97415d8.csv\";","import { useEffect, useState } from 'react';\nimport { getData } from './getData.js';\n\nconst emojiSpace = 300;\n\nfunction emojiUnicode(emoji) {\n  let comp;\n  if (emoji.length === 1) {\n    comp = emoji.charCodeAt(0);\n  }\n  comp = (emoji.charCodeAt(0) - 0xd800) * 0x400 + (emoji.charCodeAt(1) - 0xdc00) + 0x10000;\n  if (comp < 0) {\n    comp = emoji.charCodeAt(0);\n  }\n  return comp.toString('16');\n}\n\nfunction lojbanLength(number) {\n  return number.toString().replace(/\\./g, ' pi ');\n}\n\nfunction parseSize(size) {\n  if (size < 2) {\n    return `miltre li ${lojbanLength(size * 10)}<br/> (${size * 10} mm)`;\n  }\n  if (size < 100) {\n    return `centre li ${lojbanLength(size)}<br/> (${size}cm)`;\n  }\n  if (size < 100 * 1000) {\n    return `mitre li ${lojbanLength(Math.round(size * 100) / 100 / 100)}<br/> (${\n      Math.round(size * 100) / 100 / 100\n    }m)`;\n  }\n  return `ki'otre li ${lojbanLength(Math.round(size / 100 / 10) / 100)}<br/> (${\n    Math.round(size / 100 / 10) / 100\n  }km)`;\n}\n\nfunction App() {\n  const [data, dataSet] = useState([]);\n  const [scroll, scrollSet] = useState(0);\n\n  useEffect(() => {\n    getData().then((res) => {\n      document.body.style.height = `${emojiSpace * res.length + window.innerHeight - emojiSpace}px`;\n      dataSet(res);\n    });\n\n    function loop() {\n      const newScroll = window.pageYOffset;\n      scrollSet(newScroll);\n      window.requestAnimationFrame(loop);\n    }\n    window.requestAnimationFrame(loop);\n  }, []);\n\n  return (\n    <div className=\"emoji-display\">\n      {data.map(([emoji, size, label], idx) => {\n        const windowWidth = window.innerWidth;\n        const compoundDistance = windowWidth / 2 + idx * emojiSpace;\n\n        let relativeDistance = compoundDistance - scroll - emojiSpace / 2;\n\n        // Slow the scrolling at the beginning of the screen\n        if (relativeDistance < windowWidth / 2) {\n          relativeDistance =\n            relativeDistance * 0.1 + (0.9 * (relativeDistance + windowWidth * 0.5)) / 2;\n        }\n\n        // Don't render the emoji if out of window\n        if (\n          relativeDistance < -emojiSpace * 0.75 ||\n          relativeDistance > windowWidth - emojiSpace * 0.1\n        ) {\n          return null;\n        }\n\n        let emojisToScale = [Math.floor(scroll / emojiSpace), Math.ceil(scroll / emojiSpace)];\n\n        emojisToScale = emojisToScale\n          .map((idx) => {\n            if (idx < 0) return 0;\n            if (idx > data.length - 1) return data.length - 1;\n            return idx;\n          })\n          .map((idx) => data[idx]);\n\n        const floorCeilProgress = (scroll / emojiSpace) % 1;\n        const floatScale =\n          floorCeilProgress * emojisToScale[1][1] + (1 - floorCeilProgress) * emojisToScale[0][1];\n\n        const calculatedScale = Math.min(size / floatScale, 64);\n\n        let opacity = 1;\n        if (calculatedScale > 3) {\n          const diff = (calculatedScale - 3) / 8;\n          opacity = Math.max(1 - diff, 0);\n        }\n\n        return (\n          <div\n            className=\"emoji-container\"\n            style={{\n              transform: `translatex(${relativeDistance}px)`\n              // left: `${relativeDistance}px`\n            }}\n            key={emoji}\n          >\n            <div\n              className=\"emoji\"\n              style={{\n                opacity,\n                transform: `scale(${calculatedScale}) translateY(10%)`\n              }}\n            >\n              <img alt={emoji}\n                src={`https://raw.githubusercontent.com/googlefonts/noto-emoji/main/svg/emoji_u${emojiUnicode(\n                  emoji\n                )}.svg`}\n              />\n            </div>\n            <div className=\"title-wrapper\">\n              <b>{label}</b>\n              <div\n                dangerouslySetInnerHTML={{ __html: parseSize(size) }}\n                style={{ marginTop: '.5rem' }}\n              ></div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}